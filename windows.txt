YAZ Compilation guidelines for winNT/95.
  $Id: windows.txt,v 1.3 1999-12-02 13:54:56 adam Exp $

This distribution of YAZ includes makefiles that works with Visual
C++ version 5 and 6. The makefile is located in sub directory 'win'.

If you wish to make modifications to the make process you should
edit makefile before proceeding. For example, a DEBUG version of YAZ
can be build by modifying the line 'DEBUG=0' to 'DEBUG=1' in the
makefile.

Run nmake in that directory (in a Command prompt for example). Eg:
    >CD \YAZ\WIN
    >NMAKE

Make sure that the environment variables PATH, LIB and INCLUDE are
set properly. They *should* be set by the Visual C++ installation.
Programs cl.exe, link.exe and others must be found in the PATH. The
standard includes files, standard libraries must be found in INCLUDE
and LIB respectively.

The following components are build by the nmake process:

yaz.dll - This DLL is made of the source in all sub directories except
         for 'server', 'client' and 'ztest'. To export public functions
         the header files contain the modifier YAZ_EXPORT which is
         defined in yconfig.h. The value of this modifier,
         __declspec(dllexport), is probably specific to Visual C++. 

server.lib - The server library, which includes the source from
         'server'.  Unlike the UNIX version, the server library is
         multi-threaded.

yaz-client.exe - A Z39.50 client console application. It is linked with
         the import library yaz.lib. This application searches for yaz.dll
         during runtime.

yaz-ztest.exe - The Z39.50 test server as a console application. It is
         linked with the import library yaz.lib and the regular library
         server.lib. When running yaz-ztest make sure it is able to find
         the record test files dummy-records, dummy-grs, and dummy-words
         in the current directory. 

         As an option ztest may be installed as an NT service
         (not Windows 95). Use 'ztest -install <otherargs>' to install
         it and 'ztest -remove <otherargs>' to remove it again. Since
         NT runs the service program in some weird directory, such as
         \winnt\system32, it's probably a good idea to use the option
         '-w' to change to some other directory. For example

            yaz-ztest -install -w d:\proj\yaz\ztest -l ztest.out tcp:@:210

         which specifies both working directory (d:\proj\yaz\ztest) 
         and a log file (ztest.out). The server is started on port 210.

After successful compilation all executables and DLL's are located
in sub YAZ\BIN. Libraries are located in YAZ\LIB.
