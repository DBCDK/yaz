# Makefile for Email gateway CCL
# Europagate, 1995
#
# $Log: Makefile.in,v $
# Revision 1.5  1999-06-09 09:43:31  adam
# Header files moved to include (used to be z39.50).
#
# Revision 1.4  1999/03/31 11:15:37  adam
# Fixed memory leaks in ccl_find_str and ccl_qual_rm.
#
# Revision 1.3  1998/10/28 15:10:03  adam
# Added --with-yc option to configure. For the data1_node in data1.h:
# decreased size of localdata and removed member "line" which wasn't useful.
#
# Revision 1.2  1998/08/25 16:19:39  adam
# Minor changes to Makefile(s).
#
# Revision 1.1  1998/08/21 14:13:26  adam
# Added GNU Configure script to build Makefiles.
#
# Revision 1.8  1997/09/17 12:10:28  adam
# YAZ version 1.4.
#
# Revision 1.7  1997/04/30 08:52:05  quinn
# Null
#
# Revision 1.6  1996/10/11  15:00:24  adam
# CCL parser from Europagate Email gateway 1.0.
#
# Revision 1.12  1996/05/22  08:37:13  adam
# Removed CFLAGS definition.
#
# Revision 1.11  1995/11/10 10:19:10  adam
# cclsh now build on 'make all'.
#
# Revision 1.10  1995/05/11  14:03:56  adam
# Changes in the reading of qualifier(s). New function: ccl_qual_fitem.
# New variable ccl_case_sensitive, which controls whether reserved
# words and field names are case sensitive or not.
#
# Revision 1.9  1995/04/17  09:31:34  adam
# Improved handling of qualifiers. Aliases or reserved words.
#
# Revision 1.8  1995/04/10  10:22:35  quinn
# Added ccl directory.
#
# Revision 1.7  1995/03/27  12:49:03  adam
# Removed CFLAGS def.
#
# Revision 1.6  1995/02/23  08:31:58  adam
# Changed header.
#
# Revision 1.4  1995/02/22  08:50:28  adam
# Definition of CPP changed.
#
# Revision 1.3  1995/02/14  10:25:55  adam
# The constructions 'qualifier rel term ...' implemented.
#
# Revision 1.2  1995/02/13  15:15:06  adam
# Added handling of qualifiers. Not finished yet.
#
# Revision 1.1  1995/02/13  12:35:20  adam
# First version of CCL. Qualifiers aren't handled yet.
#
SHELL=/bin/sh

CC=@CC@
CPP=@CPP@
RANLIB=@RANLIB@
CDEFS=@DEFS@
LIBS=@LIBS@

INCLUDE=-I../include
PROG=cclsh
LIB=../lib/libccl.a
PO=cclfind.o ccltoken.o cclerrms.o cclqual.o cclptree.o cclqfile.o cclstr.o
DEFS=$(INCLUDE) $(CDEFS)

all: $(LIB)

$(PROG): $(PROG).o $(LIB)
	$(CC) $(CFLAGS) -o $(PROG) $(PROG).o $(LIB) $(LIBS)

$(LIB): $(PO)
	rm -f $(LIB)
	ar qc $(LIB) $(PO)
	$(RANLIB) $(LIB)

.c.o:
	$(CC) -c $(DEFS) $(CFLAGS) $<

clean:
	rm -f *.log *.[oa] $(PROG) core mon.out gmon.out errlist *~

depend:
	sed '/^#Depend/q' <Makefile >Makefile.tmp
	$(CPP) $(DEFS) -M *.c >>Makefile.tmp
	mv -f Makefile.tmp Makefile

#Depend --- DOT NOT DELETE THIS LINE
