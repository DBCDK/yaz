# Makefile for Email gateway CCL
# Europagate, 1995
#
# $Log: Makefile,v $
# Revision 1.7  1997-04-30 08:52:05  quinn
# Null
#
# Revision 1.6  1996/10/11  15:00:24  adam
# CCL parser from Europagate Email gateway 1.0.
#
# Revision 1.12  1996/05/22  08:37:13  adam
# Removed CFLAGS definition.
#
# Revision 1.11  1995/11/10 10:19:10  adam
# cclsh now build on 'make all'.
#
# Revision 1.10  1995/05/11  14:03:56  adam
# Changes in the reading of qualifier(s). New function: ccl_qual_fitem.
# New variable ccl_case_sensitive, which controls whether reserved
# words and field names are case sensitive or not.
#
# Revision 1.9  1995/04/17  09:31:34  adam
# Improved handling of qualifiers. Aliases or reserved words.
#
# Revision 1.8  1995/04/10  10:22:35  quinn
# Added ccl directory.
#
# Revision 1.7  1995/03/27  12:49:03  adam
# Removed CFLAGS def.
#
# Revision 1.6  1995/02/23  08:31:58  adam
# Changed header.
#
# Revision 1.4  1995/02/22  08:50:28  adam
# Definition of CPP changed.
#
# Revision 1.3  1995/02/14  10:25:55  adam
# The constructions 'qualifier rel term ...' implemented.
#
# Revision 1.2  1995/02/13  15:15:06  adam
# Added handling of qualifiers. Not finished yet.
#
# Revision 1.1  1995/02/13  12:35:20  adam
# First version of CCL. Qualifiers aren't handled yet.
#
SHELL=/bin/sh
INCLUDE=-I../include
TPROG1=cclsh
LIB=../lib/ccl.a
PO=cclfind.o ccltoken.o cclerrms.o cclqual.o cclptree.o cclqfile.o cclstr.o
CPP=$(CC) -E
DEFS=$(INCLUDE)

all: $(LIB)

$(TPROG1): $(TPROG1).o $(LIB)
	$(CC) $(CFLAGS) -o $(TPROG1) $(TPROG1).o $(LIB)

$(LIB): $(PO)
	rm -f $(LIB)
	ar qc $(LIB) $(PO)
	ranlib $(LIB)

.c.o:
	$(CC) -c $(DEFS) $(CFLAGS) $<

clean:
	rm -f *.log *.[oa] $(TPROG1) $(TPROG2) core mon.out gmon.out errlist *~

depend: depend2

depend1:
	sed '/^#Depend/q' <Makefile >Makefile.tmp
	$(CPP) $(DEFS) -M *.c >>Makefile.tmp
	mv -f Makefile.tmp Makefile

depend2:
	$(CPP) $(DEFS) -M *.c >.depend	

#GNU make style depend
ifeq (.depend,$(wildcard .depend))
include .depend
endif

#Depend --- DOT NOT DELETE THIS LINE
